#!/usr/bin/env bash
# Parse data.json and print a human sentence:
# "Pikachu is of type Electric, weighs 6kg, and is 0.4m tall."
# Only using jq, awk, sed for extraction/formatting.

# 1) Extract raw fields from JSON
name=$(jq -r '.name' data.json)
type=$(jq -r '.types[0].type.name' data.json)
height_dm=$(jq -r '.height' data.json)   # decimeters
weight_hg=$(jq -r '.weight' data.json)   # hectograms

# 2) Convert units (dm -> m, hg -> kg), format to 1 decimal, strip trailing .0
formatted_height=$(awk "BEGIN { printf(\"%.1f\", $height_dm/10) }" | sed 's/\.0$//')
formatted_weight=$(awk "BEGIN { printf(\"%.1f\", $weight_hg/10) }" | sed 's/\.0$//')

# 3) Capitalize first letter of name and type using awk
name=$(echo "$name" | awk '{print toupper(substr($0,1,1)) tolower(substr($0,2))}')
type=$(echo "$type" | awk '{print toupper(substr($0,1,1)) tolower(substr($0,2))}')

# 4) Echo EXACT template the checker expects:
echo "$name is of type $type, weighs ${formatted_weight}kg, and is ${formatted_height}m tall."

